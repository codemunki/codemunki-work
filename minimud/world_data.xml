<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE minimud_world SYSTEM "world_data.dtd">

<minimud_world>
	<room>
		<id>1</id>
		<name>Starter Tavern</name>
		<description>You appear in a dark, smelly tavern.  You can't pick out any specific conversation amongst the cacophony, but you're sure it's there.  The exit to the street is to the west.  There is a rusty lantern on the table in front of you.  What looks like a door to a storeroom is to the north.</description>
		<move>
			<direction>west</direction>
			<next_room_id>2</next_room_id>
			<description>Street exit</description>
		</move>
		<move>
			<direction>north</direction>
			<next_room_id>3</next_room_id>
			<description>Storeroom door</description>
		</move>
		<npc>
			<name>Tommy</name>
			<description>a tall, scruffy man in a brown leather jerkin.  He looks a little drunk, but otherwise harmless.  He looks like he has something to say.</description>
			<intro>Name's Tommy the Lip, but you can call me Tommy.  Welcome to the world of MiniMUD.  I can answer most basic questions that new folks tend to ask.</intro>
			<action>
				<name>punch</name>
				<result>
					<type>text_only</type>
					<description>You try to punch Tommy the Lip, but miss.  Maybe he's not as drunk as he looks.</description>
				</result>
			</action>
			<action>
				<name>push</name>
				<result>
					<type>text_only</type>
					<description>You push Tommy.  He didn't appear to enjoy it as much as you did.</description>
				</result>
			</action>
			<action>
				<name>punch</name>
				<result>
					<type>text_only</type>
					<description>You try to punch Tommy the Lip, but miss.  Maybe he's not as drunk as he looks.</description>
				</result>
			</action>
			<action>
				<name>talk</name>
				<result>
					<type>give_quest</type>
					<description>Hi.  I'm Tommy.  Welcome to the tavern.  You look new.  You should pick up that lantern over there.  It might come in handy later.</description>
					<value>1</value>
				</result>
			</action>
			<action>
				<name>talk</name>
				<quest_dependency_id>1</quest_dependency_id>
				<quest_dependency_step>1</quest_dependency_step>
				<result>
					<type>text_only</type>
					<description>You should try picking up the lantern.</description>
				</result>
			</action>
			<action>
				<name>talk</name>
				<quest_dependency_id>1</quest_dependency_id>
				<quest_dependency_step>2</quest_dependency_step>
				<result>
					<type>complete_quest</type>
					<description>Nice work.  You should go adventuring.</description>
					<value>1</value>
				</result>
			</action>
			<action>
				<name>talk</name>
				<quest_dependency_complete>1</quest_dependency_complete>
				<result>
					<type>give_quest</type>
					<value>2</value>
					<description>Now that you have a lantern, check out the storeroom to the north.</description>
				</result>
			</action>
			<action>
				<name>talk</name>
				<quest_dependency_id>2</quest_dependency_id>
				<quest_dependency_step>2</quest_dependency_step>
				<result>
					<type>complete_quest</type>
					<description>Nice work.  I don't have any other jobs for you.  You should go adventuring.</description>
					<value>2</value>
				</result>
			</action>
			<action>
				<name>talk</name>
				<quest_dependency_complete>2</quest_dependency_complete>
				<result>
					<type>text_only</type>
					<description>Now that you have completed your first quests, maybe you should try traveling.  Type 'north' or 'west' to check out the adjacent areas.</description>
				</result>
			</action>
		</npc>
		<object>
			<name>lantern</name>
			<description>a standard oil-based lantern, covered in rust.  It must not be important to anyone.</description>
			<action>
				<name>push</name>
				<result>
					<type>text_only</type>
					<description>You push the lantern and it falls over.</description>
				</result>
			</action>
			<action>
				<name>take</name>
				<quest_dependency_id>1</quest_dependency_id>
				<quest_dependency_step>1</quest_dependency_step>
				<result>
					<type>item_reward</type>
					<description>You take the lantern and add it to your inventory</description>
					<item_id>1</item_id>
				</result>
				<result>
					<type>update_quest</type>
					<description>Talk to Tommy.</description>
					<value>2</value>
				</result>
				<result>
					<type>xp_reward</type>
					<description>You just completed your first quest step!</description>
					<value>5</value>
				</result>
			</action>
			<action>
				<name>take</name>
				<result>
					<type>text_only</type>
					<description>You think this belongs to Tommy.  Maybe you should talk to him before you take it.</description>
					<item_id>1</item_id>
				</result>
			</action>
		</object>

		<object>
			<name>potion</name>
			<description>a small vial containing a reddish liquid.</description>
			<action>
				<name>take</name>
				<result>
					<type>item_reward</type>
					<description>You pick up the potion.</description>
					<item_id>8</item_id>
				</result>
			</action>
		</object>
	</room>

	<room>
		<id>2</id>
		<name>Main Street</name>
		<description>You turn on to Main Street.  There isn't much traffic this time of day.  To the east is a loud, smelly tavern.  To the north is the local church.  The light in the doorway indicates that it is open.  To the west is the town bank.  To the south is a park.</description>
		<move>
			<direction>east</direction>
			<next_room_id>1</next_room_id>
			<description>Tavern door</description>
		</move>	
		<move>
			<direction>north</direction>
			<next_room_id>4</next_room_id>
			<description>Church doorway.</description>
		</move>	
		<move>
			<direction>west</direction>
			<next_room_id>5</next_room_id>
			<description>Bank doorway.</description>
		</move>
		<move>
			<direction>south</direction>
			<next_room_id>6</next_room_id>
			<description>Central Park.</description>
		</move>
	</room>

	<room>
		<id>3</id>
		<name>Storeroom</name>
		<description>You quietly sneak into the storeroom.  It is lined with the skulls of sacrificed animals.  There is a pentagram painted on the floor in blood.  You wonder what exactly is in the meat pie.  To the south is the door back into the main Tavern.  There is a dagger on the floor.</description>
		<move>
			<direction>south</direction>
			<next_room_id>1</next_room_id>
			<description>Tavern door</description>
		</move>	
		<object>
			<name>dagger</name>
			<description>a shiny dagger, covered in dried blood.  It must have been used on the animals.</description>
			<action>
				<name>take</name>
				<result>
					<type>item_reward</type>
					<description>You take the dagger and add it to your inventory</description>
					<item_id>2</item_id>
				</result>
			</action>
		</object>
		<monster_id>1</monster_id>		
	</room>

	<room>
		<id>4</id>
		<name>Church</name>
		<description>You enter the main worship area of a church.  Rows of pews led up to an altar and a pedestal.  In the back of the church, stairs lead down.  A door to the south leads back out to Main Street.  A font of holy water shimmers in teh back of the room.</description>
		<move>
			<direction>south</direction>
			<next_room_id>2</next_room_id>
			<description>Church doorway.</description>
		</move>	

		<npc>
			<name>Theodore</name>
			<description>a stout, balding man in golden priests' robes.  Around his neck is a chain holding a giant, shiny religious symbol.</description>
			<intro>I am Theodore, the head priest of this glorius church.  Welcome!</intro>
			<action>
				<name>talk</name>
				<result>
					<type>give_quest</type>
					<description>Hello there, my son.  Welcome to my church.  As you have probably discovered, our town seems to attract trouble.  The town wizard can probably help us, but only if we can find a champion worthy of asking.  Might you be the champion we're looking for?  If you think you're up to snuff, head down the stairs and take the test of faith.  If you pass, you just might be able to save us!</description>
					<value>3</value>
				</result>
			</action>

			<action>
				<name>talk</name>
				<quest_dependency_id>3</quest_dependency_id>
				<quest_dependency_step>1</quest_dependency_step>
				<result>
					<type>text_only</type>
					<description>If you think you're up to the task, head downstairs and take the Test of Faith.</description>
				</result>
			</action>
		</npc>
		
		<object>
			<name>font</name>
			<description>a bowl on a pedestal, filled with water blessed by the church's head priest.  It looks delicious.  Maybe you should try using the font.</description>
			<action>
				<name>use</name>
				<result>
					<type>give_health</type>
					<description>You drink from the font of holy water.</description>
				</result>
			</action>
		</object>		
	</room>

	<room>
		<id>5</id>
		<name>Town Bank</name>
		<description>The town bank is pretty standard for this part of the world.  A row of teller stations with granite counter tops separates the main entryway from the vault area.  A haze of dust is emanating from the open vault door.  The bank employees are moving around frantically.  </description>
		<move>
			<direction>east</direction>
			<next_room_id>2</next_room_id>
			<description>Bank doorway.</description>
		</move>			
	</room>

	<room>
		<id>6</id>
		<name>Central Park</name>
		<description>You enter the city park.  It is a large garden filled with flowers and shrubs of every kind imaginable.  The centerpiece of the garden is a glorious tree that towers over the garden.  Herds of small, fluffy animals are playing in the branches.</description>
		<move>
			<direction>north</direction>
			<next_room_id>2</next_room_id>
			<description>Main Street</description>
		</move>			
	</room>

	<item>
		<id>1</id>
		<name>lantern</name>
		<description>a lantern.  It's a bit rusty, but it still works.</description>
		<weapon>0</weapon>
		<stackable>0</stackable>
	</item>

	<item>
		<id>2</id>
		<name>dagger</name>
		<description>a shiny, stabby dagger.</description>
		<weapon>1</weapon>
		<stackable>0</stackable>
		<damage_type>piercing</damage_type>
		<damage>20</damage>
	</item>

	<item>
		<id>3</id>
		<name>club</name>
		<description>a small, blunt, club.</description>
		<weapon>1</weapon>
		<stackable>0</stackable>
		<damage_type>bashing</damage_type>
		<damage>20</damage>
	</item>

	<item>
		<id>4</id>
		<name>sword</name>
		<description>a standard shortsword.</description>
		<weapon>1</weapon>
		<stackable>0</stackable>
		<damage_type>slashing</damage_type>
		<damage>20</damage>
	</item>

	<item>
		<id>5</id>
		<name>Ripper</name>
		<description>a small dagger, glowing with magic.</description>
		<weapon>1</weapon>
		<stackable>0</stackable>
		<damage_type>magic</damage_type>
		<damage>20</damage>
	</item>

	<item>
		<id>6</id>
		<name>Thelonius</name>
		<description>a metal club, glowing with magic.  The word 'Thelonius' is inscribed on the handle.</description>
		<weapon>1</weapon>
		<stackable>0</stackable>
		<damage_type>magic</damage_type>
		<damage>20</damage>
	</item>

	<item>
		<id>7</id>
		<name>Cockney</name>
		<description>a glorius, magical sword.</description>
		<weapon>1</weapon>
		<stackable>0</stackable>
		<damage_type>magic</damage_type>
		<damage>20</damage>
	</item>

	<item>
		<id>8</id>
		<name>Potion</name>
		<description>a health potion.</description>
		<weapon>0</weapon>
		<stackable>1</stackable>
		<effect>give_health</effect>
	</item>

	<quest>
		<id>1</id>
		<name>Welcome to MiniMUD</name>
		<reward_xp>100</reward_xp>
		<first_bonus>20</first_bonus>
		<reward_gold>100</reward_gold>
		<quest_step>
			<step_number>1</step_number>
			<description>Tommy has asked you to pick up the lantern from the table.</description>
			<hint>type 'take lantern' to pick up the lantern.</hint>
			<reward_xp>10</reward_xp>
			<reward_gold>10</reward_gold>
		</quest_step>
		<quest_step>
			<step_number>2</step_number>
			<description>Talk to Tommy to complete the quest.</description>
			<hint>this one's easy.</hint>
			<reward_xp>10</reward_xp>
			<reward_gold>10</reward_gold>
		</quest_step>
	</quest>

	<quest>
		<id>2</id>
		<name>Satanic Storeroom</name>
		<reward_xp>10</reward_xp>
		<first_bonus>20</first_bonus>
		<reward_gold>100</reward_gold>
		<quest_step>
			<step_number>1</step_number>
			<description>Tommy has asked you to check out the storeroom.</description>
			<hint>type 'north' to go to the storeroom and check it out.</hint>
			<reward_xp>100</reward_xp>
			<reward_gold>10</reward_gold>
		</quest_step>
		<quest_step>
			<step_number>2</step_number>
			<description>Now that you have cleared out the storeroom, let Tommy know.</description>
			<hint>Go talk to Tommy and let him know you cleared out the storeroom.</hint>
			<reward_xp>10</reward_xp>
			<reward_gold>10</reward_gold>
		</quest_step>
	</quest>

	<quest>
		<id>3</id>
		<name>Test of Faith</name>
		<reward_xp>10</reward_xp>
		<first_bonus>20</first_bonus>
		<reward_gold>100</reward_gold>
		<quest_step>
			<step_number>1</step_number>
			<description>Theodore has instructed you to head down the stairs and pass a test of faith.</description>
			<hint>head down the stairs and begin the test of .</hint>
			<reward_xp>10</reward_xp>
			<reward_gold>10</reward_gold>
		</quest_step>
	</quest>

	<monster>
		<id>1</id>
		<name>Imp</name>
		<description>what looks like the fiery manifestation of Hell...in a bite-sized package.</description>
		<health>20</health>
		<attack_power>15</attack_power>
		<magic_power>10</magic_power>
		<defense>1</defense>
		<magic_defense>1</magic_defense>
		<loot_table_id>1</loot_table_id>
		<kill_xp>10</kill_xp>
		<kill_gold>10</kill_gold>
		<update_quest_id>2</update_quest_id>
		<update_quest_step>2</update_quest_step>
	</monster>
	<monster>
		<id>2</id>
		<name>Ratter</name>
		<description>a giant bi-pedal rat or a smallish furry man with a pointy nose.  It's hard tell.</description>
		<health>20</health>
		<attack_power>15</attack_power>
		<magic_power>1</magic_power>
		<defense>1</defense>
		<magic_defense>1</magic_defense>
		<loot_table_id>1</loot_table_id>
		<kill_xp>10</kill_xp>
		<kill_gold>10</kill_gold>
	</monster>

	<loot_table>
		<loot_table_id>1</loot_table_id>
		<item_ref>
			<item_id>2</item_id>
			<drop_percent>30</drop_percent>
		</item_ref>
		<item_ref>
			<item_id>5</item_id>
			<drop_percent>10</drop_percent>
		</item_ref>
		<item_ref>
			<item_id>8</item_id>
			<drop_percent>20</drop_percent>
		</item_ref>
	</loot_table>

	<loot_table>
		<loot_table_id>2</loot_table_id>
		<item_ref>
			<item_id>3</item_id>
			<drop_percent>30</drop_percent>
		</item_ref>
		<item_ref>
			<item_id>6</item_id>
			<drop_percent>10</drop_percent>
		</item_ref>
		<item_ref>
			<item_id>8</item_id>
			<drop_percent>20</drop_percent>
		</item_ref>
	</loot_table>

	<loot_table>
		<loot_table_id>3</loot_table_id>
		<item_ref>
			<item_id>4</item_id>
			<drop_percent>30</drop_percent>
		</item_ref>
		<item_ref>
			<item_id>7</item_id>
			<drop_percent>10</drop_percent>
		</item_ref>
		<item_ref>
			<item_id>8</item_id>
			<drop_percent>20</drop_percent>
		</item_ref>
	</loot_table>
</minimud_world>
